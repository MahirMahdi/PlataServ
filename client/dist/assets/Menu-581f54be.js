import{f as ye,j as e,c as we,a as xe,u as Ce,r as h,b as Se,d as n,F as ve,I as _e}from"./index-94eab420.js";import{POSContext as ke}from"./POSContext-be8a92c8.js";import{u as Fe,C as A,a as Q}from"./api-5c20e404.js";import{M as Ie,a as Oe,b as Pe,D as K,u as Re,c as ze}from"./Sidebar-a2170b0b.js";import{G as De,U as X,F as Z,u as Me,a as Ne}from"./UnavailableMessage-991268a8.js";import{G as Te,I as ee}from"./Logo-0c179a24.js";import{R as We}from"./index.esm-fe24148d.js";import{T as f}from"./chunk-P74GIWPW-2e89ab56.js";import{B as i}from"./chunk-6CSUKJP7-90322ddf.js";import{M as Ge,u as Y}from"./index-981377b8.js";import{I as te}from"./chunk-GYFRIY2Z-fa84db3d.js";import{B as re}from"./chunk-NAA7TEES-e6707657.js";var Ae=ye(function(a,l){const{className:r,...s}=a,c=Fe();return e(we.div,{ref:l,className:xe("chakra-card__body",r),__css:c.body,...s})});function Le(o,a={}){const{ssr:l=!0,fallback:r}=a,{getWindow:s}=Ce(),c=Array.isArray(o)?o:[o];let y=Array.isArray(r)?r:[r];y=y.filter(b=>b!=null);const[w,C]=h.useState(()=>c.map((b,S)=>({media:b,matches:l?!!y[S]:s().matchMedia(b).matches})));return h.useEffect(()=>{const b=s();C(c.map(u=>({media:u,matches:b.matchMedia(u).matches})));const S=c.map(u=>b.matchMedia(u)),v=u=>{C(m=>m.slice().map(x=>x.media===u.media?{...x,matches:u.matches}:x))};return S.forEach(u=>{typeof u.addListener=="function"?u.addListener(v):u.addEventListener("change",v)}),()=>{S.forEach(u=>{typeof u.removeListener=="function"?u.removeListener(v):u.removeEventListener("change",v)})}},[s]),w.map(b=>b.matches)}function je(o){const{breakpoint:a,hide:l,children:r,ssr:s}=o,[c]=Le(a,{ssr:s});return(l?!c:c)?r:null}var q=(o,a)=>{var l,r;return(r=(l=o==null?void 0:o.breakpoints)==null?void 0:l[a])!=null?r:a};function Be(o){const{breakpoint:a="",below:l,above:r}=o,s=Se(),c=q(s,l),y=q(s,r);let w=a;return c?w=`(max-width: ${c})`:y&&(w=`(min-width: ${y})`),w}function ie(o){const{children:a,ssr:l}=o,r=Be(o);return e(je,{breakpoint:r,ssr:l,children:a})}ie.displayName="Show";function Ee(){return h.useContext(ke)}function $e(o){return Te({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"}}]})(o)}function Je({product:o,addProductToOrder:a}){const{image:l,price:r,name:s,discount_period:c}=o;return e(De,{children:n(A,{w:{base:150,xl:175},h:150,variant:"unstyled",onClick:a,cursor:"pointer",display:"grid",rowGap:".5rem",children:[c&&e(i,{w:{base:"40%",lg:"30%"},h:"1.5rem",bgColor:"green",fontSize:".75rem",zIndex:1,pos:"absolute",textAlign:"center",borderTopLeftRadius:"inherit",color:"white",children:"10% OFF"}),e(ee,{src:l,alt:s,height:"100px",width:"150px",borderRadius:"inherit"}),e(Ae,{h:50,children:n(i,{display:"grid",rowGap:".25rem",children:[e(f,{fontFamily:"'Poppins', sans-serif",color:"#595959",fontSize:{base:".75rem",lg:".85rem"},children:s}),c?n(i,{fontFamily:"'Lato', sans-serif",fontSize:{base:".8rem",lg:".95rem"},children:[e("sup",{style:{fontWeight:"bold"},children:"$"}),(r-r*.1).toFixed(2),n("strike",{style:{fontSize:".75rem"},children:["$",r]})]}):n(i,{fontFamily:"'Roboto', sans-serif",fontWeight:"bold",fontSize:{base:".8rem",lg:".9rem"},children:[e("sup",{style:{fontWeight:"bold"},children:"$"}),r]})]})})]})})}function Ve({handleClick:o,tab_state:a,categories:l}){return e(i,{w:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",children:l.map((r,s)=>n(A,{direction:"row",display:"flex",alignItems:"center",justifyContent:"flex-start",columnGap:"1rem",_hover:{bgColor:"#323130",color:"gray.100"},padding:"0 1rem",w:"fit-content",h:"2.5rem",onClick:()=>o(r.name),id:a===r.name?"active":"",children:[e("img",{src:r.image,alt:r.name,width:"30px",height:"30px"}),e(f,{display:{base:"none",sm:"block"},fontFamily:"'Roboto', sans-serif",fontSize:".9rem",fontWeight:"light",textAlign:"center",children:r.name})]},s))})}function oe({product:o,handleAdd:a,handleRemove:l,count:r}){const{name:s,price:c,image:y,discount_period:w}=o,C=w?(c-c*.1).toFixed(2):c;return n(A,{direction:"row",w:"100%",justifyContent:"space-between",h:"5rem",children:[e(ee,{src:y,h:"100%",width:"30%",objectFit:"cover",borderRadius:"inherit"}),n(i,{display:"grid",w:"70%",padding:".5rem",rowGap:".5rem",children:[n(i,{pos:"relative",top:0,display:"flex",alignItems:"center",justifyContent:"space-evenly",children:[e(f,{w:"70%",fontFamily:"'Poppins', sans-serif",fontWeight:"medium",fontSize:"12px",children:s}),n(i,{w:"30%",fontFamily:"'Poppins', sans-serif",fontWeight:"medium",color:"blue.300",fontSize:".75rem",children:[e("sup",{style:{fontWeight:"bold"},children:"$"}),C]})]}),n(i,{w:"45%",borderRadius:"10px",h:"1.15rem",bgColor:"#f5f6f7",display:"flex",alignItems:"center",justifyContent:"space-between",pos:"relative",bottom:0,children:[e(i,{h:"1.15rem",w:"1.15rem",borderRadius:"50%",bgColor:"white",border:"1px solid #EDF2F6",textAlign:"center",cursor:"pointer",_hover:{bgColor:"#323130",color:"gray.100"},onClick:l,children:e(f,{mt:"-.25rem",children:"-"})}),e(f,{fontSize:".65rem",color:"gray.500",fontFamily:"'Poppins', sans-serif",children:r}),e(i,{h:"1.15rem",w:"1.15rem",borderRadius:"50%",bgColor:"white",border:"1px solid #EDF2F6",textAlign:"center",cursor:"pointer",_hover:{bgColor:"#323130",color:"gray.100"},onClick:a,children:e(f,{mt:"-.3rem",children:"+"})})]})]})]})}function F({type:o,value:a}){return n(i,{display:"flex",w:"100%",alignItems:"center",justifyContent:"space-between",children:[e(f,{fontFamily:"'Roboto', sans-serif",fontWeight:"light",fontSize:o==="Total"?"1rem":".9rem",children:o}),n(f,{fontFamily:"'Roboto', sans-serif",fontWeight:"semibold",color:"#323130",fontSize:o==="Total"?".9rem":".85rem",children:["$",a||0]})]})}function ne({typeOptions:o,method:a,state:l}){return e(ve,{children:e(i,{w:"100%",display:"flex",alignItems:"center",justifyContent:"space-around",children:o==null?void 0:o.map((r,s)=>e(i,{w:"30%",h:"1.75rem",color:"gray.500",border:".5px solid gray.400",bgColor:"white",display:"grid",placeItems:"center",borderRadius:"15px",fontFamily:"'Roboto', sans-serif",fontSize:{xs:".85rem",lg:".75rem",xl:".85rem"},cursor:"pointer",_hover:{bgColor:"#323130",color:"gray.100"},onClick:a,id:l===r?"active":"",children:r},s))})})}function He({isOpen:o,onClose:a,order_summary_options:l,orders:r,allProducts:s,confirmOrderCondition:c,handleProducts:y,calculateTax:w,calculateTotal:C,subTotal:b,confirmOrder:S,orderId:v,handleCustomerName:u}){return e(ie,{breakpoint:"(max-width: 991px)",children:n(Ie,{isOpen:o,onClose:a,position:"fixed",w:{base:"100%",sm:"50%",md:"40%",lg:"20vw"},children:[e(Oe,{}),n(Ge,{children:[e(Pe,{}),n(i,{bgColor:"white",right:"0",borderLeftRadius:".75rem",boxShadow:"md",padding:"1rem",display:"grid",rowGap:".75em",overflowY:"auto",m:"1.5rem 0",children:[n(i,{children:[n(i,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e(f,{fontFamily:"'Poppins', sans-serif",fontSize:"1.25rem",fontWeight:"medium",children:"Current Order"}),e(i,{textAlign:"center",w:"40%",h:"1.5rem",bgColor:"#323130",borderRadius:"5px",children:n(f,{fontFamily:"'Poppins', sans-serif",fontSize:".9rem",fontWeight:"medium",color:"gray.100",children:["#",v]})})]}),e(f,{fontFamily:"'Poppins', sans-serif",fontWeight:"light",children:"Items"})]}),e(i,{w:"100%",display:"grid",padding:".5rem 0",rowGap:".75rem",children:r?s==null?void 0:s.filter(m=>r.hasOwnProperty(m.product_id)).map((m,x)=>e(oe,{product:m,handleAdd:()=>{y("add",m.product_id,m.discount_period,m.price)},handleRemove:()=>{y("remove",m.product_id,m.discount_period,m.price)},count:r[m.product_id]},x)):e(X,{logo:e(Z,{size:30}),message:"Order list is empty"})}),n(i,{w:"100%",m:"1.25rem 0",display:"grid",rowGap:"1rem",children:[e(f,{fontFamily:"'Poppins', sans-serif",fontSize:"1.15rem",fontWeight:"medium",children:"Order Summary"}),e(te,{placeholder:"Customer Name",type:"text",w:"60%",onChange:u})]}),n(i,{w:"100%",h:"17.5vh",bgColor:"gray.100",borderRadius:"5px",padding:"1.25rem",display:"grid",rowGap:".15rem",children:[e(F,{type:"Subtotal",value:b}),e(F,{type:"Tax",value:w(b)}),e(K,{}),e(F,{type:"Total",value:C(b)})]}),e(i,{w:"100%",h:"22.5vh",bgColor:"gray.100",borderRadius:"5px",display:"grid",placeItems:"center",padding:"2.5%",children:l.map((m,x)=>e(ne,{type:m.type,typeOptions:m.values,method:m.method,state:m.state},x))}),e(re,{isDisabled:!c,onClick:S,fontWeight:"light",fontFamily:"'Roboto', sans-serif",color:"white",bgColor:"#323130",borderRadius:"4px",children:"Confirm Order"})]})]})]})})}function Ue(){const[o,a]=h.useState("Burger"),l=Me(),[r,s]=h.useState([]),{isOpen:c,onOpen:y,onClose:w}=Re(),C=t=>{a(t)},b=async()=>{const t=await Q.get("/products");s(t.data.products)},S=t=>{u(t.product_id,t.discount_period,t.price),D(JSON.parse(localStorage.getItem("orders"))),z(JSON.parse(localStorage.getItem("subtotal"))),N("success","Added to Order!")};h.useEffect(()=>{b()},[]);const{remove:v,add:u}=Ee(),[m,x]=h.useState(null),[O,L]=h.useState(null),[P,j]=h.useState(null),[R,B]=h.useState(""),[_,z]=h.useState(JSON.parse(localStorage.getItem("subtotal"))),[p,D]=h.useState(JSON.parse(localStorage.getItem("orders"))),[ae,se]=h.useState([]),[E,de]=h.useState(null),[le,ce]=h.useState(""),[M,me]=h.useState(Y(7)),$=[{type:"Payment Method",values:["Cash","Credit card","Debit card"],state:m,method:function(d){x(d.target.innerHTML)}},{type:"Order Point",values:["Counter","Uber eats","Mobile"],state:O,method:function(d){L(d.target.innerHTML)}},{type:"Destination",values:["Dine in","Delivery","Take out"],state:P,method:function(d){j(d.target.innerHTML)}}],N=(t,d)=>l({title:d,status:t,duration:1e3,isClosable:!0}),T=(t,d,g,k)=>{t==="add"?u(d,g,k):v(d,g,k),D(JSON.parse(localStorage.getItem("orders"))),z(JSON.parse(localStorage.getItem("subtotal")))},J=t=>{B(t.target.value)},ue=()=>{const d=r.filter(g=>p==null?void 0:p.hasOwnProperty(g.product_id)).map(g=>({...g,quantity:p[g.product_id]}));ce(d.map(g=>{const{name:k,type:G,price:I}=g;return{name:k,product_type:G,quantity:p[g.product_id],price:g.discount_period?Number(((I-I*.1)*p[g.product_id]).toFixed(2)):Number((I*p[g.product_id]).toFixed(2))}}))},pe=()=>{const t=r.filter(g=>p==null?void 0:p.hasOwnProperty(g.product_id));let d=[];t.map(g=>{const{ingredients:k}=g;k.map(G=>{const{name:I,units_in_a_pack:fe,_id:be}=G;d.push({id:be,name:I,units_in_a_pack:fe,quantity:p[g.product_id]})})}),se(d)};h.useEffect(()=>{ue(),pe()},[p,r]);const V=async()=>{const t=await Q.put("/inventory",{ingredients:ae});t.data.error?N("error",t.data.error):(N("success",t.data.success),he(),ge())},H=p&&R&&m&&O&&P,he=()=>{const t=JSON.parse(localStorage.getItem("dashboard"));localStorage.setItem("dashboard",JSON.stringify(t?[...t,E]:[E]))},ge=()=>{localStorage.removeItem("orders"),localStorage.removeItem("subtotal"),B(null),D(null),z(null),x(null),L(null),j(null),me(Y(7))},W=t=>Number((t*.1).toFixed(2)),U=t=>{const d=W(t);return Number(d+t).toFixed(2)};return h.useEffect(()=>{de({details:le,customer_name:R,total_price:Number((.1*_+_).toFixed(2)),timestamp:Date.now(),order_id:M,payment_method:m,order_point:O,destination:P,total_quantity:p&&Object.values(p).reduce((t,d)=>t+d)})},[p,R,m,O,P]),n(i,{display:"flex",w:"100vw",h:"100vh",children:[e(He,{isOpen:c,onClose:w,order_summary_options:$,orders:p,allProducts:r,confirmOrderCondition:H,handleProducts:T,calculateTax:W,calculateTotal:U,subTotal:_,confirmOrder:V,orderId:M,handleCustomerName:J}),n(i,{w:{base:"100vw",lg:"60vw",xl:"65vw"},ml:{lg:"15vw"},padding:{base:"0 1rem",sm:"0 1.5rem",md:"0 1.75rem",lg:"1.5rem 2rem"},children:[e(i,{display:{base:"flex",lg:"none"},w:{base:"100%",lg:"70%"},alignItems:"center",justifyContent:"space-around",children:n(i,{display:"flex",w:{base:"100%",lg:"35%"},alignItems:"center",justifyContent:"space-between",children:[e(ze,{}),e(i,{onClick:y,right:0,bgColor:"white",cursor:"pointer",children:e(We,{fontSize:"1.5rem"})})]})}),n(i,{display:"grid",rowGap:".5rem",w:"100%",children:[e(f,{fontFamily:"'Poppins', sans-serif",fontSize:{base:"1rem",lg:"1.25rem"},children:"Categories"}),e(Ve,{handleClick:C,tab_state:o,categories:Qe})]}),e(i,{mt:{base:"2.5rem",lg:"2.5rem"},paddingBottom:"2.5rem",children:e(Ne,{w:"100%",display:"grid",templateColumns:{base:"repeat(2, 1fr)",sm:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:10,children:r.filter(t=>t.type===o.toLowerCase()).map((t,d)=>e(Je,{addProductToOrder:()=>{S(t)},product:t},d))})})]}),n(i,{position:"fixed",hideBelow:"lg",w:{base:"100%",md:"60%",lg:"25vw",xl:"20vw"},h:"100vh",bgColor:"white",right:"0",borderLeftRadius:".75rem",boxShadow:"md",padding:"1rem",display:"grid",rowGap:".25em",overflowY:"auto",children:[n(i,{w:"100%",children:[n(i,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e(f,{fontFamily:"'Poppins', sans-serif",fontSize:"1.25rem",fontWeight:"medium",children:"Current Order"}),e(i,{textAlign:"center",w:"40%",h:"1.5rem",bgColor:"#323130",borderRadius:"5px",children:n(f,{fontFamily:"'Poppins', sans-serif",fontSize:".9rem",fontWeight:"medium",color:"gray.100",children:["#",M]})})]}),e(f,{fontFamily:"'Poppins', sans-serif",fontWeight:"light",children:"Items"})]}),e(i,{w:"100%",display:"grid",padding:".5rem 0",rowGap:".75rem",children:p?r==null?void 0:r.filter(t=>p.hasOwnProperty(t.product_id)).map((t,d)=>e(oe,{product:t,handleAdd:()=>{T("add",t.product_id,t.discount_period,t.price)},handleRemove:()=>{T("remove",t.product_id,t.discount_period,t.price)},count:p[t.product_id]},d)):e(X,{logo:e(Z,{size:30}),message:"Order list is empty"})}),n(i,{w:"100%",m:"1.25rem 0",display:"grid",rowGap:"1rem",children:[e(f,{fontFamily:"'Poppins', sans-serif",fontSize:"1.15rem",fontWeight:"medium",children:"Order Summary"}),e(te,{placeholder:"Customer Name",type:"text",onChange:J})]}),n(i,{w:"100%",h:"17.5vh",bgColor:"gray.100",borderRadius:"5px",padding:"1.25rem",display:"grid",rowGap:".15rem",children:[e(F,{type:"Subtotal",value:_}),e(F,{type:"Tax",value:W(_)}),e(K,{}),e(F,{type:"Total",value:U(_)})]}),e(i,{w:"100%",h:"22.5vh",bgColor:"gray.100",borderRadius:"5px",display:"grid",placeItems:"center",padding:"2.5%",children:$.map((t,d)=>e(ne,{type:t.type,typeOptions:t.values,method:t.method,state:t.state},d))}),e(re,{isDisabled:!H,onClick:V,fontWeight:"light",fontFamily:"'Roboto', sans-serif",color:"white",bgColor:"#323130",borderRadius:"4px",_hover:{bgColor:"blue.300"},children:"Confirm Order"})]})]})}const Qe=[{name:"Burger",image:"https://ik.imagekit.io/y4cguk6dk/tr:h-45/burger.png?"},{name:"Sandwich",image:"https://ik.imagekit.io/y4cguk6dk/tr:h-45/sandwich.png?"},{name:"Drinks",image:"https://ik.imagekit.io/y4cguk6dk/tr:h-45/drink.png?"},{name:"Sides",image:"https://ik.imagekit.io/y4cguk6dk/tr:h-45/sides.png?"}],st=()=>e(_e,{color:"gray.100",w:{base:4,lg:5},h:{base:4,lg:5},as:$e}),dt=h.memo(Ue);export{st as SearchIcon,dt as default};
