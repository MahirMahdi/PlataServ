import{d as s,j as t,r}from"./index-94eab420.js";import{c as A}from"./Sidebar-a2170b0b.js";import{v as k,w as J,x as K,y as N}from"./Logo-0c179a24.js";import{b as Q}from"./index.esm-fe24148d.js";import{C as U,B as n}from"./chunk-6CSUKJP7-90322ddf.js";import{T as _}from"./chunk-P74GIWPW-2e89ab56.js";import{C as X,a as i}from"./api-5c20e404.js";import{S as D,I,a as L,B as Y,R as Z,m as f}from"./moment-e3624afe.js";import{I as R}from"./chunk-GYFRIY2Z-fa84db3d.js";import"./chunk-NAA7TEES-e6707657.js";import"./index.esm-e2511e47.js";function ee({data:a,handleClick:b,tab_state:p}){const{icon:h,name:c,color:y}=a;return s(X,{w:{base:"45vw",sm:"30vw",lg:"17.5vw",xl:"15vw"},h:{base:"2.5rem",sm:"3rem"},variant:"elevated",direction:"row",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"0 1rem",columnGap:"1rem",cursor:"pointer",_hover:{bgColor:"#323130",color:"gray.100"},onClick:()=>b(c),id:p===c?"active":"",children:[t(U,{size:{base:"24px",sm:"30px"},fontSize:"inherit",bg:y,color:"white",children:h}),t(_,{fontSize:{base:"1rem",sm:"1.1rem"},children:c})]})}function he(){const[a,b]=r.useState("Purchases"),[p,h]=r.useState("Monthly"),[c,y]=r.useState("Monthly"),[M,w]=r.useState("month"),[W,g]=r.useState("month"),[d,S]=r.useState(new Date),[u,T]=r.useState(new Date),[x,m]=r.useState([]),[z,C]=r.useState(),[l,O]=r.useState(),P=async()=>{if(a!=="Inventory"){const e=await i.post(`/report/${a.toLocaleLowerCase()}`,{type:"monthly",month:d});m(e.data.reports)}else{const e=await i.get("/report/inventory");m(e.data.reports)}},B=async()=>{if(a!=="Inventory"){const e=await i.post(`/chart/${a.toLocaleLowerCase()}`,{type:"monthly",month:u});C(e.data.reports)}},F=async()=>{if(a!=="Inventory"){const e=await i.get(`/recent/${a.toLocaleLowerCase()}`);O(e.data.recent)}};r.useEffect(()=>{P(),B(),F()},[a]);const G=e=>{h("Monthly"),w("month"),S(new Date),y("Monthly"),g("month"),T(new Date),b(e)},$=e=>{const o=e.target.value;h(o),w(o==="Daily"?"date":o==="Weekly"?"week":"month")},j=e=>{const o=e.target.value;y(o),g(o==="Weekly"?"week":"month")},q=e=>{S(e.target.value)},E=e=>{T(e.target.value)},V=async()=>{if(p==="Daily"){const e=await i.post(`/report/${a.toLocaleLowerCase()}`,{type:"daily",date:d});m(e.data.reports)}else if(p==="Weekly"){const e=new Date(f(d).startOf("week").toDate()).toISOString(),o=new Date(f(d).endOf("week").toDate()).toISOString(),v=await i.post(`/report/${a.toLocaleLowerCase()}`,{type:"weekly",start_date:e,end_date:o});m(v.data.reports)}else{const e=await i.post(`/report/${a.toLocaleLowerCase()}`,{type:"monthly",month:d});m(e.data.reports)}},H=async()=>{if(c==="Weekly"){const e=new Date(f(u).startOf("week").toDate()).toISOString(),o=new Date(f(u).endOf("week").toDate()).toISOString(),v=await i.post(`/chart/${a.toLocaleLowerCase()}`,{type:"weekly",start_date:e,end_date:o});C(v.data.reports)}else{const e=await i.post(`/chart/${a.toLocaleLowerCase()}`,{type:"monthly",month:u});C(e.data.reports)}};return t(n,{display:"flex",w:"100vw",h:"100vh",children:s(n,{w:{base:"100vw",lg:"85vw"},padding:{base:"0 1rem",sm:"0 1.5rem",md:"0 1.75rem",lg:"1.5rem 2rem"},ml:{lg:"17.5vw",xl:"15vw"},minH:"100vh",children:[t(A,{}),t(n,{w:"100%",display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",rowGap:"1rem",children:te.map((e,o)=>t(ee,{handleClick:G,tab_state:a,data:e},o))}),a!=="Inventory"?s(n,{mt:"2.5rem",display:"grid",rowGap:"1rem",children:[s(n,{display:"flex",alignItems:"center",columnGap:"1rem",children:[s(D,{placeholder:"Select filter type",size:"sm",type:"month",borderRadius:"5px",onChange:$,defaultValue:p,w:"10rem",children:[t("option",{value:"Daily",children:"Daily"}),t("option",{value:"Weekly",children:"Weekly"}),t("option",{value:"Monthly",children:"Monthly"})]}),t(R,{placeholder:"Select Date and Time",size:"sm",onChange:q,type:M,borderRadius:"5px",w:"10rem",cursor:"pointer"}),t(I,{size:"sm","aria-label":"Search database",icon:t(k,{}),bgColor:"#323130",color:"white",onClick:V})]}),s(_,{padding:{base:"1rem 0",sm:"0"},fontFamily:"'Poppins', sans-serif",fontSize:"1.15rem",fontWeight:"semibold",children:[p," Report"]}),t(L,{reports:x}),s(n,{mt:"1rem",w:"100%",display:{base:"grid",lg:"flex"},alignItems:"center",columnGap:"1.5rem",rowGap:"1.5rem",children:[s(n,{w:{base:"100%",lg:"60%"},h:"fit-content",display:"grid",rowGap:"1.5rem",children:[s(n,{display:"flex",alignItems:"center",columnGap:"1rem",children:[s(D,{placeholder:"Select filter type",size:"sm",type:"month",borderRadius:"5px",onChange:j,defaultValue:c,w:"10rem",children:[t("option",{value:"Weekly",children:"Weekly"}),t("option",{value:"Monthly",children:"Monthly"})]}),t(R,{placeholder:"Select Period",size:"sm",type:W,onChange:E,borderRadius:"5px",w:"10rem",cursor:"pointer"}),t(I,{size:"sm","aria-label":"Search database",icon:t(k,{}),bgColor:"#323130",color:"white",onClick:H})]}),t(Y,{title:c,label:a,reports:z})]}),t(n,{w:{base:"100%",lg:"40%"},h:"min-content",children:t(Z,{type:a.toLowerCase(),total_quantity:l==null?void 0:l.total_quantity,total_amount:l==null?void 0:l.total_amount,date:l==null?void 0:l.date})})]})]}):t(n,{mt:"2.5rem",display:"grid",rowGap:"1rem",children:t(L,{reports:x})})]})})}const te=[{icon:t(J,{}),name:"Purchases",color:"blue.300"},{icon:t(Q,{}),name:"Wastes",color:"red.600"},{icon:t(K,{}),name:"Inventory",color:"yellow.500"},{icon:t(N,{}),name:"Foodbank",color:"pink.400"}];export{he as default};
